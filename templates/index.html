<!DOCTYPE html>
<html>
<head>
    <title>Smart Attendance Generator</title>
    <style>
        body { font-family: Arial; background:#f4f6f8; }
        .box {
            width: 420px; margin: 60px auto; padding: 30px;
            background: white; border-radius: 8px;
            box-shadow: 0 0 10px #ccc;
        }
        h2 { text-align:center; }
        input, button {
            width:100%; padding:10px; margin:8px 0;
        }
        button {
            background:#27ae60; color:white;
            border:none; font-size:16px;
        }
    </style>
<style>
.loader-container {
    margin-top: 20px;
    text-align: center;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 5px solid #ddd;
    border-top: 5px solid #28a745;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loader-container p {
    margin-top: 10px;
    font-weight: bold;
    color: #444;
}
</style>

</head>
<body>

<div class="box">
    <h2>Smart Attendance Generator</h2>
   

<form method="POST" action="/generate" enctype="multipart/form-data" onsubmit="showLoader()">

    <input name="batch_id" placeholder="Batch ID" required>
    <input name="dept_name" placeholder="Course Name" required>
    <input name="company_name" placeholder="Company Name" required>

    <input type="date" name="start_date" required>
    <input type="date" name="end_date" required>

    <label><b>Upload Student Batch Excel</b></label>
    <input type="file" name="student_file" accept=".xlsx" required>
    <!-- Loader -->
    <div id="loader" class="loader-container" style="display:none;">
        <div class="spinner"></div>
        <p>Generating attendance, please wait...</p>
    </div>

    <button type="submit" class="btn green" onclick="showLoader()">
        Generate Attendance
    </button>
</form>

 {% with messages = get_flashed_messages() %}
  {% if messages %}
    <a href="/download/zip" class="btn btn-success">
    Download Attendance ZIP
  </a>
    <div style="
        background:#d4edda;
        color:#155724;
        padding:10px;
        margin-bottom:15px;
        border-radius:5px;
        text-align:center;">
        {{ messages[0] }}
            {% endif %}
            {% endwith %}
</div>

<script>
function showLoader() {
    document.getElementById("loader").style.display = "block";
}
</script>


</body>
</html>
